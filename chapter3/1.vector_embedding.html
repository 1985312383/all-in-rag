<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.164" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" type="image/png" href="https://theme-plume.vuejs.press/favicon-32x32.png"><title>第一节 向量嵌入 | all-in-rag</title><meta name="description" content=""><link rel="preload" href="/all-in-rag/assets/style-Dq5epFDY.css" as="style"><link rel="stylesheet" href="/all-in-rag/assets/style-Dq5epFDY.css"><link rel="modulepreload" href="/all-in-rag/assets/app-CFXp0Idr.js"><link rel="modulepreload" href="/all-in-rag/assets/1.vector_embedding.html-C9TJtyAt.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-f73ca3da><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-17e3d305></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-17e3d305> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-f73ca3da data-v-e98a6132><div class="vp-navbar" vp-navbar data-v-e98a6132 data-v-2c31ea5e><div class="wrapper" data-v-2c31ea5e><div class="container" data-v-2c31ea5e><div class="title" data-v-2c31ea5e><div class="vp-navbar-title has-sidebar" data-v-2c31ea5e data-v-1a4f50af><a class="vp-link link no-icon title" href="/all-in-rag/" data-v-1a4f50af><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-480e858a><!--]--><!--[--><img class="vp-image light logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-480e858a><!--]--><!--]--><!--]--><span data-v-1a4f50af>all-in-rag</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-2c31ea5e><div class="content-body" data-v-2c31ea5e><!--[--><!--]--><div class="vp-navbar-search search" data-v-2c31ea5e><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-2c31ea5e data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/all-in-rag/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>首页</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/all-in-rag/mnt74gun/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>教程</span><!----><!--]--><!----></a><!--]--><!--]--></nav><!--[--><!--]--><div class="vp-flyout vp-navbar-translations translations" data-v-2c31ea5e data-v-0d45479b data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="选择语言" data-v-86530b6c><span class="text" data-v-86530b6c><!----><span class="vpi-languages option-icon" data-v-86530b6c></span><!----><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><div class="items" data-v-0d45479b><p class="title" data-v-0d45479b>简体中文</p><!--[--><div class="vp-menu-link" data-v-0d45479b data-v-1ff1855f><a class="vp-link link" href="/all-in-rag/en/" data-v-1ff1855f><!--[--><!----> English <!----><!--]--><!----></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="vp-navbar-appearance appearance" data-v-2c31ea5e data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-2c31ea5e data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/datawhalechina/all-in-rag" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-2c31ea5e data-v-652282fd data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-86530b6c><span class="vpi-more-horizontal icon" data-v-86530b6c></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/datawhalechina/all-in-rag" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-2c31ea5e data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-2c31ea5e><div class="divider-line" data-v-2c31ea5e></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-f73ca3da data-v-3944d8e8><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-3944d8e8><span class="vpi-align-left menu-icon" data-v-3944d8e8></span><span class="menu-text" data-v-3944d8e8>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3944d8e8 data-v-4114a62c><button data-v-4114a62c>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-f73ca3da data-v-95211354><div class="curtain" data-v-95211354></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-95211354><span id="sidebar-aria-label" class="visually-hidden" data-v-95211354> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第一章 解锁RAG</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter1/1.RAG_intro.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 RAG简介</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter1/2.preparation.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第二节 准备工作</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter1/3.get_start_rag.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第三节 四步构建RAG</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter1/4.virtualenv.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>附：Python虚拟环境部署方案补充</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第二章 数据准备</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter2/1.data_load.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 数据加载</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter2/2.text_chunking.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第二节 文本分块</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第三章 索引构建</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter3/1.vector_embedding.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 向量嵌入</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter3/2.multimodal_embedding.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第二节 多模态嵌入</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter3/3.vector_db.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第三节 向量数据库</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter3/4.milvus.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第四节 Milvus介绍及多模态检索实践</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter3/5.index_optimization.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第五节 索引优化</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第四章 检索优化</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter4/1.hybrid_search.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节：混合检索</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter4/2.query_construction.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第二节：查询构建</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter4/3.text2sql.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第三节：文本到SQL</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter4/4.query_rewriting.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第四节：查询重构与分发</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter4/5.advanced_retrieval_techniques.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第五节：检索进阶</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第五章 生成集成</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter5/1.formatted_generation.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 格式化生成</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第六章 RAG系统评估</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter6/1.system_evaluation.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节：评估介绍</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter6/2.common_tools.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 评估常用工具</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第七章 高级RAG架构（拓展选修篇）</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter7/1.kg_rag.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节：基于知识图谱的RAG</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第八章 项目实战一（基础篇）</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter8/1.env_architecture.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 环境配置与项目架构</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter8/2.data_preparation.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第二节 数据准备模块实现</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter8/3.index_retrieval.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第三节 索引构建与检索优化</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter8/4.generation_sys.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第四节 生成集成与系统整合</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第九章 项目实战一优化（选修篇）</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter9/1.graph_rag_architecture.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 图RAG系统架构与环境配置</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter9/2.graph_data_modeling.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第二节 图数据建模与Neo4j集成</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter9/3.index_construction.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第三节 Milvus索引构建</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter9/4.intelligent_query_routing.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第四节 智能查询路由与检索策略</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>第十一章 Neo4J 简单应用</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div style="display:none;" data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter11/1.knowledge_graph.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第一节 知识图谱与 Neo4j 安装</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/all-in-rag/chapter11/2.neo4j.html" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>第二节 Neo4j 基本使用</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-f73ca3da data-v-b2beaca7><div class="vp-doc-container has-sidebar" data-v-b2beaca7 data-v-23f6ad98><!--[--><!--]--><div class="container" data-v-23f6ad98><!----><div class="content" data-v-23f6ad98><div class="content-container" data-v-23f6ad98><!--[--><!--]--><main class="main" data-v-23f6ad98><nav class="vp-breadcrumb" data-v-23f6ad98 data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb" href="/all-in-rag/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="首页" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><span class="vp-link breadcrumb" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->第三章 索引构建<!--]--><!----></span><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="第三章 索引构建" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb current" href="/all-in-rag/chapter3/1.vector_embedding.html" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->第一节 向量嵌入<!--]--><!----></a><!----><meta property="name" content="第一节 向量嵌入" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-ba8d1a1e><!----> 第一节 向量嵌入 <!----></h1><div class="vp-doc-meta" data-v-ba8d1a1e><!--[--><!--]--><p class="reading-time" data-v-ba8d1a1e><span class="vpi-books icon" data-v-ba8d1a1e></span><span data-v-ba8d1a1e>约 3490 字</span><span data-v-ba8d1a1e>大约 12 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-ba8d1a1e><span class="vpi-clock icon" data-v-ba8d1a1e></span><span data-v-ba8d1a1e>2025-09-28</span></p></div><!--]--><!--[--><!--]--><div class="_chapter3_1_vector_embedding external-link-icon-enabled vp-doc plume-content" vp-content data-v-23f6ad98><!--[--><!--]--><div data-v-23f6ad98><h2 id="一、向量嵌入基础" tabindex="-1"><a class="header-anchor" href="#一、向量嵌入基础"><span>一、向量嵌入基础</span></a></h2><h3 id="_1-1-基础概念" tabindex="-1"><a class="header-anchor" href="#_1-1-基础概念"><span>1.1 基础概念</span></a></h3><h4 id="_1-1-1-什么是-embedding" tabindex="-1"><a class="header-anchor" href="#_1-1-1-什么是-embedding"><span>1.1.1 什么是 Embedding</span></a></h4><p>向量嵌入（Embedding）是一种将真实世界中复杂、高维的数据对象（如文本、图像、音频、视频等）转换为数学上易于处理的、低维、稠密的连续数值向量的技术。</p><p>想象一下，我们将每一个词、每一段话、每一张图片都放在一个巨大的多维空间里，并给它一个独一无二的坐标。这个坐标就是一个向量，它“嵌入”了原始数据的所有关键信息。这个过程，就是 Embedding。</p><ul><li><strong>数据对象</strong>：任何信息，如文本“你好世界”，或一张猫的图片。</li><li><strong>Embedding 模型</strong>：一个深度学习模型，负责接收数据对象并进行转换。</li><li><strong>输出向量</strong>：一个固定长度的一维数组，例如 <code>[0.16, 0.29, -0.88, ...]</code>。这个向量的维度（长度）通常在几百到几千之间。</li></ul><figure><img src="/all-in-rag/images/3_1_1.webp" alt="Embedding 过程示意图" tabindex="0" loading="lazy"><figcaption>Embedding 过程示意图</figcaption></figure><h4 id="_1-1-2-向量空间的语义表示" tabindex="-1"><a class="header-anchor" href="#_1-1-2-向量空间的语义表示"><span>1.1.2 向量空间的语义表示</span></a></h4><p>Embedding 的真正意义在于，它产生的向量不是随机数值的堆砌，而是对数据<strong>语义</strong>的数学编码。</p><ul><li><strong>核心原则</strong>：在 Embedding 构建的向量空间中，语义上相似的对象，其对应的向量在空间中的距离会更近；而语义上不相关的对象，它们的向量距离会更远。</li><li><strong>关键度量</strong>：我们通常使用以下数学方法来衡量向量间的“距离”或“相似度”： <ul><li><strong>余弦相似度 (Cosine Similarity)</strong> ：计算两个向量夹角的余弦值。值越接近 1，代表方向越一致，语义越相似。这是最常用的度量方式。</li><li><strong>点积 (Dot Product)</strong> ：计算两个向量的乘积和。在向量归一化后，点积等价于余弦相似度。</li><li><strong>欧氏距离 (Euclidean Distance)</strong> ：计算两个向量在空间中的直线距离。距离越小，语义越相似。</li></ul></li></ul><h3 id="_1-2-embedding-在-rag-中的作用" tabindex="-1"><a class="header-anchor" href="#_1-2-embedding-在-rag-中的作用"><span>1.2 Embedding 在 RAG 中的作用</span></a></h3><p>在RAG流程中，Embedding 扮演着无可替代的重要角色。</p><h4 id="_1-2-1-语义检索的基础" tabindex="-1"><a class="header-anchor" href="#_1-2-1-语义检索的基础"><span>1.2.1 语义检索的基础</span></a></h4><p>RAG 的“检索”环节通常以基于 Embedding 的语义搜索为核心。通用流程如下：</p><ol><li><strong>离线索引构建</strong>：将知识库内文档切分后，使用 Embedding 模型将每个文档块（Chunk）转换为向量，存入专门的向量数据库中。</li><li><strong>在线查询检索</strong>：当用户提出问题时，使用<strong>同一个</strong> Embedding 模型将用户的问题也转换为一个向量。</li><li><strong>相似度计算</strong>：在向量数据库中，计算“问题向量”与所有“文档块向量”的相似度。</li><li><strong>召回上下文</strong>：选取相似度最高的 Top-K 个文档块，作为补充的上下文信息，与原始问题一同送给大语言模型（LLM）生成最终答案。</li></ol><h4 id="_1-2-2-决定检索质量的关键" tabindex="-1"><a class="header-anchor" href="#_1-2-2-决定检索质量的关键"><span>1.2.2 决定检索质量的关键</span></a></h4><p>Embedding 的质量直接决定了 RAG 检索召回内容的准确性与相关性。一个优秀的 Embedding 模型能够精准捕捉问题和文档之间的深层语义联系，即使用户的提问和原文的表述不完全一致。反之，一个劣质的 Embedding 模型可能会因为无法理解语义而召回不相关或错误的信息，从而“污染”提供给 LLM 的上下文，导致最终生成的答案质量低下。</p><h2 id="二、embedding-技术发展" tabindex="-1"><a class="header-anchor" href="#二、embedding-技术发展"><span>二、Embedding 技术发展</span></a></h2><p>Embedding 技术的发展与自然语言处理（NLP）的进步紧密相连，尤其是在 RAG 框架出现后，对嵌入技术提出了新的要求。其演进路径大致可分为以下几个关键阶段。</p><h3 id="_2-1-静态词嵌入-上下文无关的表示" tabindex="-1"><a class="header-anchor" href="#_2-1-静态词嵌入-上下文无关的表示"><span>2.1 静态词嵌入：上下文无关的表示</span></a></h3><ul><li><strong>代表模型</strong>：Word2Vec (2013), GloVe (2014)</li><li><strong>主要原理</strong>：为词汇表中的每个单词生成一个固定的、与上下文无关的向量。例如，<code>Word2Vec</code> 通过 Skip-gram 和 CBOW 架构，利用局部上下文窗口学习词向量，并验证了向量运算的语义能力（如 <code>国王 - 男人 + 女人 ≈ 王后</code>）。<code>GloVe</code> 则融合了全局词-词共现矩阵的统计信息。</li><li><strong>局限性</strong>：无法处理一词多义问题。在“苹果公司发布了新手机”和“我吃了一个苹果”中，“苹果”的词向量是完全相同的，这限制了其在复杂语境下的语义表达能力。</li></ul><h3 id="_2-2-动态上下文嵌入" tabindex="-1"><a class="header-anchor" href="#_2-2-动态上下文嵌入"><span>2.2 动态上下文嵌入</span></a></h3><p>2017年，<code>Transformer</code> 架构的诞生带来了自注意力机制（Self-Attention），它允许模型在生成一个词的向量时，动态地考虑句子中所有其他词的影响。基于此，2018年 <code>BERT</code> 模型利用 <code>Transformer</code> 的编码器，通过掩码语言模型（MLM）等自监督任务进行预训练，生成了深度上下文相关的嵌入。同一个词在不同语境中会生成不同的向量，这有效解决了静态嵌入的一词多义难题。</p><h3 id="_2-3-rag-对嵌入技术的新要求" tabindex="-1"><a class="header-anchor" href="#_2-3-rag-对嵌入技术的新要求"><span>2.3 RAG 对嵌入技术的新要求</span></a></h3><p>在开篇我们就提到了 RAG 框架的提出<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>，是为了解决大型语言模型 <strong>知识固化</strong>（内部知识难以更新）和 <strong>幻觉</strong>（生成的内容可能不符合事实且无法溯源）的问题。它通过“检索-生成”范式，动态地为 LLM 注入外部知识。这一过程的核心是 <strong>语义检索</strong>，很大程度上依赖于高质量的向量嵌入。</p><p>后续 RAG 的兴起对嵌入技术提出了更高、更具体的要求：</p><ul><li><strong>领域自适应能力</strong>：通用的嵌入模型在专业领域（如法律、医疗）往往表现不佳，这就要求嵌入模型具备领域自适应的能力，能够通过微调或使用指令（如 INSTRUCTOR 模型）来适应特定领域的术语和语义。</li><li><strong>多粒度与多模态支持</strong>：RAG 系统需要处理的不仅仅是短句，还可能包括长文档、代码，甚至是图像和表格。这就要求嵌入模型能够处理不同长度和类型的输入数据。</li><li><strong>检索效率与混合检索</strong>：嵌入向量的维度和模型大小直接影响存储成本和检索速度。同时，为了结合语义相似性（密集检索）和关键词匹配（稀疏检索）的优点，支持混合检索的嵌入模型（如 BGE-M3）应运而生，在某些任务中成为提升召回率的关键。</li></ul><h2 id="三、嵌入模型训练原理" tabindex="-1"><a class="header-anchor" href="#三、嵌入模型训练原理"><span>三、嵌入模型训练原理</span></a></h2><p>了解了嵌入模型的发展，我们来简单探究一下当前主流的嵌入模型（通常是基于 <code>BERT</code> 的变体）是如何通过训练获得强大的语义理解能力的。</p><h3 id="_3-1-核心架构-bert" tabindex="-1"><a class="header-anchor" href="#_3-1-核心架构-bert"><span>3.1 核心架构：BERT</span></a></h3><p>现代嵌入模型的核心通常是 Transformer 的编码器（Encoder）部分，<code>BERT</code> 就是其中的典型代表。它通过堆叠多个 <code>Transformer Encoder</code> 层来构建一个深度的双向表示学习网络。</p><h3 id="_3-2-核心训练任务" tabindex="-1"><a class="header-anchor" href="#_3-2-核心训练任务"><span>3.2 核心训练任务</span></a></h3><p>BERT 的成功很大程度上归功于其巧妙的<strong>自监督学习</strong>策略，它允许模型从海量的、无标注的文本数据中学习知识。</p><h4 id="任务一-掩码语言模型-masked-language-model-mlm" tabindex="-1"><a class="header-anchor" href="#任务一-掩码语言模型-masked-language-model-mlm"><span>任务一：掩码语言模型 (Masked Language Model, MLM)</span></a></h4><ul><li><strong>过程</strong>： <ol><li>随机地将输入句子中 15% 的词元（Token）替换为一个特殊的 <code>[MASK]</code> 标记。</li><li>让模型去预测这些被遮盖住的原始词元是什么。</li></ol></li><li><strong>目标</strong>：通过这个任务，模型被迫学习每个词元与其上下文之间的关系，从而掌握深层次的语境语义。</li></ul><h4 id="任务二-下一句预测-next-sentence-prediction-nsp" tabindex="-1"><a class="header-anchor" href="#任务二-下一句预测-next-sentence-prediction-nsp"><span>任务二：下一句预测 (Next Sentence Prediction, NSP)</span></a></h4><ul><li><strong>过程</strong>： <ol><li>构造训练样本，每个样本包含两个句子 A 和 B。</li><li>其中 50% 的样本，B 是 A 的真实下一句（IsNext）；另外 50% 的样本，B 是从语料库中随机抽取的句子（NotNext）。</li><li>让模型判断 B 是否是 A 的下一句。</li></ol></li><li><strong>目标</strong>：这个任务让模型学习句子与句子之间的逻辑关系、连贯性和主题相关性。</li><li><strong>重要说明</strong>：后续的研究（如 RoBERTa）发现<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup>，NSP 任务可能过于简单，甚至会损害模型性能。因此，许多现代的预训练模型（如 RoBERTa、SBERT）已经放弃了 NSP 任务。</li></ul><blockquote><p>更多细节可查看 <a href="https://github.com/datawhalechina/base-nlp/blob/main/docs/chapter5/13_Bert.md" target="_blank" rel="noopener noreferrer">BERT 架构及应用</a></p></blockquote><h3 id="_3-3-效果增强策略" tabindex="-1"><a class="header-anchor" href="#_3-3-效果增强策略"><span>3.3 效果增强策略</span></a></h3><p>虽然 MLM 和 NSP 赋予了模型强大的基础语义理解能力，但为了在检索任务中表现更佳，现代嵌入模型通常会引入更具针对性的训练策略。</p><ul><li><p><strong>度量学习 (Metric Learning)</strong> ：</p><ul><li><strong>思想</strong>：直接以“相似度”作为优化目标。</li><li><strong>方法</strong>：收集大量相关的文本对（例如，（问题，答案）、（新闻标题，正文））。训练的目标是优化向量空间中的<strong>相对距离</strong>：让“正例对”的向量表示在空间中被“拉近”，而“负例对”的向量表示被“推远”。关键在于优化排序关系，而非追求绝对的相似度值（如 1 或 0），因为过度追求极端值可能导致模型过拟合。</li></ul></li><li><p><strong>对比学习 (Contrastive Learning)</strong> ：</p><ul><li><strong>思想</strong>：在向量空间中，将相似的样本“拉近”，将不相似的样本“推远”。</li><li><strong>方法</strong>：构建一个三元组（Anchor, Positive, Negative）。其中，Anchor 和 Positive 是相关的（例如，同一个问题的两种不同问法），Anchor 和 Negative 是不相关的。训练的目标是让 <code>distance(Anchor, Positive)</code> 尽可能小，同时让 <code>distance(Anchor, Negative)</code> 尽可能大。</li></ul></li></ul><h2 id="四、嵌入模型选型指南" tabindex="-1"><a class="header-anchor" href="#四、嵌入模型选型指南"><span>四、嵌入模型选型指南</span></a></h2><p>理论已经了解，那么该如何选择最适合你项目的嵌入模型？</p><h3 id="_4-1-从-mteb-排行榜开始" tabindex="-1"><a class="header-anchor" href="#_4-1-从-mteb-排行榜开始"><span>4.1 从 MTEB 排行榜开始</span></a></h3><p><a href="https://huggingface.co/spaces/mteb/leaderboard" target="_blank" rel="noopener noreferrer"><strong>MTEB (Massive Text Embedding Benchmark)</strong></a> 是一个由 Hugging Face 维护的、全面的文本嵌入模型评测基准。它涵盖了分类、聚类、检索、排序等多种任务，并提供了公开的排行榜，为评估和选择嵌入模型提供了重要的参考依据。</p><figure><img src="/all-in-rag/images/3_1_2.webp" alt="MTEB 排行榜" tabindex="0" loading="lazy"><figcaption>MTEB 排行榜</figcaption></figure><p>下面这张图是网站中的模型评估图像，非常直观地展示了在选择开源嵌入模型时需要权衡的四个核心维度：</p><ul><li><strong>横轴 - 模型参数量 (Number of Parameters)</strong> ：代表了模型的大小。通常，参数量越大的模型（越靠右），其潜在能力越强，但对计算资源的要求也越高。</li><li><strong>纵轴 - 平均任务得分 (Mean Task Score)</strong> ：代表了模型的综合性能。这个分数是模型在分类、聚类、检索等一系列标准 NLP 任务上的平均表现。分数越高（越靠上），说明模型的通用语义理解能力越强。</li><li><strong>气泡大小 - 嵌入维度 (Embedding Size)</strong> ：代表了模型输出向量的维度。气泡越大，维度越高，理论上能编码更丰富的语义细节，但同时也会占用更多的存储和计算资源。</li><li><strong>气泡颜色 - 最大处理长度 (Max Tokens)</strong> ：代表了模型能处理的文本长度上限。颜色越深，表示模型能处理的 Token 数量越多，对长文本的适应性越好。</li></ul><figure><img src="/all-in-rag/images/3_1_3.webp" alt="MTEB 排行榜多维度评估示意图" tabindex="0" loading="lazy"><figcaption>MTEB 排行榜多维度评估示意图</figcaption></figure><p>MTEB 榜单可以帮助我们快速筛选掉大量不合适的模型。但需要注意，榜单上的得分是在通用数据集上评测的，可能无法完全反映模型在你特定业务场景下的表现。</p><h3 id="_4-2-关键评估维度" tabindex="-1"><a class="header-anchor" href="#_4-2-关键评估维度"><span>4.2 关键评估维度</span></a></h3><p>在查看榜单时，除了分数，你还需要关注以下几个关键维度：</p><ol><li><strong>任务 (Task)</strong> ：对于 RAG 应用，需要重点关注模型在 <code>Retrieval</code> (检索) 任务下的排名。</li><li><strong>语言 (Language)</strong> ：模型是否支持你的业务数据所使用的语言？对于中文 RAG，应选择明确支持中文或多语言的模型。</li><li><strong>模型大小 (Size)</strong> ：模型越大，通常性能越好，但对硬件（显存）的要求也越高，推理速度也越慢。需要根据你的部署环境和性能要求来权衡。</li><li><strong>维度 (Dimensions)</strong> ：向量维度越高，能编码的信息越丰富，但也会占用更多的存储空间和计算资源。</li><li><strong>最大 Token 数 (Max Tokens)</strong> ：这决定了模型能处理的文本长度上限。这个参数是你设计文本分块（Chunking）策略时必须考虑的重要依据，块大小不应超过此限制。</li><li><strong>得分与机构 (Score &amp; Publisher)</strong> ：结合模型的得分排名和其发布机构的声誉进行初步筛选。知名机构发布的模型通常质量更有保障。</li><li><strong>成本 (Cost)</strong> ：如果是使用 API 服务的模型，需要考虑其调用成本；如果是自部署开源模型，则需要评估其对硬件资源的消耗（如显存、内存）以及带来的运维成本。</li></ol><h3 id="_4-3-迭代测试与优化" tabindex="-1"><a class="header-anchor" href="#_4-3-迭代测试与优化"><span>4.3 迭代测试与优化</span></a></h3><blockquote><p>不要只依赖公开榜单做最终决定。</p></blockquote><ol><li><strong>确定基线 (Baseline)</strong> ：根据上述维度，选择几个符合要求的模型作为你的初始基准模型。</li><li><strong>构建私有评测集</strong> ：根据真实业务数据，手动创建一批高质量的评测样本，每个样本包含一个典型用户问题和它对应的标准答案（或最相关的文档块）。</li><li><strong>迭代优化</strong> ： <ul><li>使用基线模型在你的私有评测集上运行，评估其召回的准确率和相关性。</li><li>如果效果不理想，可以尝试更换模型，或者调整 RAG 流程的其他环节（如文本分块策略）。</li><li>通过几轮的对比测试和迭代优化，最终选出在你的特定场景下表现最佳的那个“心仪”模型。</li></ul></li></ol><h2 id="参考文献" tabindex="-1"><a class="header-anchor" href="#参考文献"><span>参考文献</span></a></h2><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p><a href="https://arxiv.org/abs/2005.11401" target="_blank" rel="noopener noreferrer">Lewis et al. (2020). <em>Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</em></a> <a href="#footnote-ref1" class="footnote-backref">↩︎</a></p></li><li id="footnote2" class="footnote-item"><p><a href="https://www.comet.com/site/blog/roberta-a-modified-bert-model-for-nlp/" target="_blank" rel="noopener noreferrer"><em>RoBERTa: A Modified BERT Model for NLP</em></a> <a href="#footnote-ref2" class="footnote-backref">↩︎</a></p></li></ol></section></div><!----><!----><div class="vp-doc-copyright" data-v-23f6ad98><h2 id="doc-copyright" tabindex="-1" class="vp-doc-header" data-v-309da98c><a href="#doc-copyright" class="header-anchor" data-v-309da98c><span data-v-309da98c><!--[-->版权所有<!--]--></span></a></h2><div class="hint-container tip copyright-container" data-v-22c67d2a><p data-v-22c67d2a><span data-v-22c67d2a>版权归属：</span><a class="vp-link link no-icon" href="https://github.com/FutureUnreal" target="_blank" rel="noreferrer" data-v-22c67d2a><!--[-->FutureUnreal<!--]--><!----></a></p><!----><p data-v-22c67d2a><span data-v-22c67d2a>许可证：</span><a class="vp-link link no-icon" href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noreferrer" data-v-22c67d2a><!--[-->署名 4.0 国际 (CC-BY-4.0)<!--]--><!----></a><!--[--><span class="vpi-license-cc" data-v-22c67d2a></span><span class="vpi-license-by" data-v-22c67d2a></span><!--]--></p></div></div></div></main><footer class="vp-doc-footer" data-v-23f6ad98 data-v-7138e2cb><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-7138e2cb><span class="contributors-label" data-v-7138e2cb>贡献者: </span><span class="contributors-info" data-v-7138e2cb><!--[--><!--[--><span class="contributor" data-v-7138e2cb>FutureUnreal</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" data-v-7138e2cb>1985312383</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-7138e2cb><div class="pager" data-v-7138e2cb><a class="vp-link link pager-link prev" href="/all-in-rag/chapter2/2.text_chunking.html" data-v-7138e2cb><!--[--><span class="desc" data-v-7138e2cb>上一页</span><span class="title" data-v-7138e2cb>第二节 文本分块</span><!--]--><!----></a></div><div class="pager" data-v-7138e2cb><a class="vp-link link pager-link next" href="/all-in-rag/chapter3/2.multimodal_embedding.html" data-v-7138e2cb><!--[--><span class="desc" data-v-7138e2cb>下一页</span><span class="title" data-v-7138e2cb>第二节 多模态嵌入</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button type="button" class="vp-back-to-top" aria-label="back to top" data-v-f73ca3da style="display:none;" data-v-bcf8d9a6><span class="percent" data-allow-mismatch data-v-bcf8d9a6>0%</span><span class="show icon vpi-back-to-top" data-v-bcf8d9a6></span><svg aria-hidden="true" data-v-bcf8d9a6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-bcf8d9a6></circle></svg></button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="sign down" class="vp-sign-down" aria-hidden="true" data-v-f73ca3da style="display:none;" data-v-900978de><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" data-v-900978de><path d="m19 11l-7 6l-7-6" data-v-900978de></path><path d="m19 5l-7 6l-7-6" opacity="0.6" data-v-900978de></path></g></svg><footer class="vp-footer has-sidebar" vp-footer data-v-f73ca3da data-v-400675cf><!--[--><div class="container" data-v-400675cf><p class="message" data-v-400675cf>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/all-in-rag/assets/app-CFXp0Idr.js" defer></script></body></html>